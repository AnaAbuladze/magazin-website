@use "sass:math";
@use "sass:list";
@use "sass:map";
@use "sass:meta";

// -----------------------------
// Spacing setup
// -----------------------------
$spaces: 0, 4px, 8px, 12px,14px,  16px, 20px, 24px, 28px, 32px,36px,35px, 48px,56px, 64px, 84px,87px, 96px, 192px;

$space-map: ();

@for $i from 1 through list.length($spaces) {
  $value: list.nth($spaces, $i);
  $num: if(meta.type-of($value) == "number" and math.unit($value) == "px",
    math.div($value, 1px),
    $value
  );
  $space-map: map.merge($space-map, ($num: $value));
}

// Directions
$directions: (
  t: (top),
  b: (bottom),
  l: (left),
  r: (right),
  v: (top, bottom),
  h: (left, right)
);

// Breakpoints
$breakpoints: (
  sm: 576px,
  md: 768px,
  lg: 1040px,
  xl: 1200px,
  xxl:1500px
);

// Mapping m→margin, p→padding
$type-map: (
  m: margin,
  p: padding
);

// -----------------------------
// Spacing generator
// -----------------------------
@mixin space-classes($short-type) {
  $real-type: map.get($type-map, $short-type);

  @each $key, $value in $space-map {
    @each $dir-short, $props in $directions {
      .#{$short-type}-#{$dir-short}-#{$key} {
        @each $prop in $props {
          #{$real-type}-#{$prop}: $value;
        }
      }
    }
  }

  @each $bp, $width in $breakpoints {
    @media (min-width: $width) {
      @each $key, $value in $space-map {
        @each $dir-short, $props in $directions {
          .#{$bp}\:#{$short-type}-#{$dir-short}-#{$key} {
            @each $prop in $props {
              #{$real-type}-#{$prop}: $value;
            }
          }
        }
      }
    }
  }
}

// Generate spacing classes
@include space-classes(m);
@include space-classes(p);

// -----------------------------
// Aspect Ratio
// -----------------------------
@mixin aspectRatio($width, $height) {
  position: relative;
  overflow: hidden;

  &:before {
    display: block;
    content: "";
    width: 100%;
    padding-top: math.div($height, $width) * 100%;
  }

  .ratio-img {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

// -----------------------------
// Multiline Ellipsis
// -----------------------------
@mixin multilineElipsis($count) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: $count;
  -webkit-box-orient: vertical;
}

// -----------------------------
// Responsive Mixin (ADDED!)
// -----------------------------
@mixin responsive($size) {
  @if $size == "sm" {
    @media (max-width: map.get($breakpoints, sm)) { @content; }
  } @else if $size == "md" {
    @media (max-width: map.get($breakpoints, md)) { @content; }
  } @else if $size == "lg" {
    @media (max-width: map.get($breakpoints, lg)) { @content; }
  } @else if $size == "xl" {
    @media (max-width: map.get($breakpoints, xl)) { @content; }
  } @else if $size == "xxl" {
    @media (max-width: map.get($breakpoints, xxl)) { @content; }
  } @else {
    @error "Unknown breakpoint: `#{$size}`";
  }
}

